<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GHR BELUGA</title>
    <link rel="manifest" href="#" id="manifest-placeholder">
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="GHR BELUGA">

    <link rel="apple-touch-icon" sizes="180x180" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxODAiIGhlaWdodD0iMTgwIiBmaWxsPSIjMjU2M2ViIiByeD0iMjAiLz4KPHN2ZyB4PSI0MCIgeT0iNDAiIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9IndoaXRlIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KPHBhdGggZD0ibTE3LjUgMTkuNS0uNS0yLjUtLjUtMi41LTUtMi41LTUtMi41LS41IDIuNS0uNSAyLjVaIi8+CjxwYXRoIGQ9Im05IDUgOCA4LTMuNS0xTDkgNVoiLz4KPHN2Zz4KPHN2Zz4KPC9zdmc+">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        }

        .app-container {
            max-width: 400px;
            margin: 0 auto;
            background: #f5f5f5;
            min-height: 100vh;
            position: relative;
        }

        .header {
            background: #2563eb;
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 24px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 8px; /* Espacio debajo del título principal */
        }

        .header-logos {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }

        .header-logo {
            height: 30px; /* Tamaño de los logos */
        }

        .content {
            padding: 20px;
            padding-bottom: 100px;
        }

        .btn {
            width: 100%;
            padding: 16px;
            border-radius: 12px;
            border: none;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 12px;
            transition: all 0.2s;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-primary {
            background: #2563eb;
            color: white;
        }

        .btn-success {
            background: #059669;
            color: white;
        }

        .btn-warning {
            background: #d97706;
            color: white;
        }

        .btn-danger {
            background: #dc2626;
            color: white;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.2s;
            background-color: white;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            cursor: pointer;
        }
        
        .form-input-half {
            width: calc(50% - 6px);
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #2563eb;
        }

        .operation-item {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            border-left: 4px solid #2563eb;
        }

        .operation-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .operation-title {
            font-weight: 600;
            color: #1f2937;
        }

        .operation-time {
            color: #059669;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            font-weight: 600;
        }

        .operation-controls {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .btn-sm {
            padding: 8px 12px;
            font-size: 14px;
            min-width: auto;
            margin: 0;
        }

        .btn-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-icon:active {
            transform: scale(0.9);
        }

        .btn-icon.minus {
            background: #fee2e2;
            color: #dc2626;
        }

        .btn-icon.plus {
            background: #dcfce7;
            color: #16a34a;
        }

        .btn-icon.edit {
            background: #dbeafe;
            color: #2563eb;
        }

        .payload-input {
            width: 100px;
            padding: 8px;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            font-size: 14px;
            margin-right: 8px;
        }

        .flight-info {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            color: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .flight-info h2 {
            font-size: 20px;
            margin-bottom: 8px;
        }

        .flight-info p {
            opacity: 0.9;
            margin-bottom: 4px;
        }

        .history-item {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .history-operations {
            max-height: 200px;
            overflow-y: auto;
            background: #f9fafb;
            border-radius: 8px;
            padding: 12px;
        }

        .history-operation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            margin-bottom: 4px;
            background: white;
            border-radius: 6px;
            font-size: 14px;
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 400px;
            background: white;
            padding: 12px 20px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            display: flex;
            gap: 12px;
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="header">
            <h1>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="m17.5 19.5-.5-2.5-.5-2.5-5-2.5-5-2.5-.5 2.5-.5 2.5Z"/>
                    <path d="m9 5 8 8-3.5-1L9 5Z"/>
                </svg>
                GHR BELUGA
            </h1>
            <div class="header-logos">
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNSAyNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDAuMTgyMzE3SDIuOTY2NzRWNC4xNjU3OThIMjEuODI4NlYwLjE4MjMxN0gyNC43OTQ0VjcuMzcxOTkzSDIxLjgyODZWMTIuMjk3NUgxOC44NjM5VjI0Ljg2MTFIMTUuODk4NlYxMi4yOTc1SDUuOTI4MDJWNy4zNzE5OTNIMi45NjY3NFYxMi4yOTc1SDUuOTI4MDJWMTkuOTM0M0gyLjYwMDM4VjI0Ljg2MTFIMjIuMTM5NVYxOS45MzQzSDE4LjgzMzlWMTAuNTUyN0gxOS45MjQ2VjcuMzcxOTkzSDE1Ljg5ODZWMTUuNTI1MjEwLjc3OTg2VjEwLjU1MjdIMTguODYzOVY3LjM3MTk5M0gxNS44OTg2VjQuMTY1Nzk4SDIxLjgyODZWNy4zNzE5OTNIMjQuNzk0NFYxMS41MjVIMjEuODI4NlYxNy44MjMzSDE4LjgzMzlWMTkuOTM0M0gxNS44OTg2VjEwLjU1MjdIMTcuMDg4NFYxMS40MTI4SDE3LjA4ODRWMTIuMjk3NUgxOS42ODE1VjExLjUyNUgxOS42ODE1VjE2Ljk1MzNIMTcuMDc5NFYyMS41NzI3aDUtLjUwNTV2LTYuNzQzMmwtLjM1NDcxLTQuOTMyMVYxMy45OTU1aDcuMzI5OTRWMTUuMTczNEwyMy41MzQ3IDE4Ljg5MzJMOS42MTEwMyAxNy42MTExaDIuMjU3ODhWMjEuNzczMkwxNC4yMTM2IDE2Ljk4MzVIMTguNzUzNlYxNy40ODU4TDEzLjUxMTggMjEuMzkxM0gxNS43NzM1VjI1LjUxODdIMjQuMjk1NlYyNC4wOTE1VjI4LjA2ODhIMjcuMjQyOVYzMC4wMjIyVjI4LjA5NzlMMzAuMDQ5NiAyNC4wOTM4aDEuNDQzODdWMjIuMDcyM0gzMC4xODQ3VjI1LjU1NDlIMjYuOTU2MlYyNC4yODk3aDIuMTQ1NTlWMjIuNTU1OUwyNS4yMTkyIDI2LjUzODdIMjIuNDkwMVYyNC45OTI5bC4zNDU1My0uNDQ2MzVWMjMuOTE0OUgyMS45MTk5VjI2LjU5MDRIMjAuNjI2VjI0LjIyOTZIMTguNDkxNVYyMS42MTY0SDE3LjgyNjNWMTkuOTAyVjE4LjU5NjNIMTkuNjcxMVYxNy42NjgzVjIwLjA4NjVIMjEuOTI1MVYxOS45NzYzSDE3LjkxNzlWMTguODIzNkgyNS4wMTc4VjE2Ljk1MzNIMjguMDY2NVYxOC44MjM2SDI2LjA5NzVWMTYuOTUzM0gzMS4yNjY3VjE3Ljk0OTdIMjguNTU5NFYyMy41NTI1SDMyLjA2NjVWMjEuOTIzTDI3LjE4OTMgMjcuNDMyNkwxOS45ODIgMjUuMTMwMkM5LjE2NTMgMjMuNjA1MSAyLjUzMTcgMjMuMTUzOSAxLjgzMDE2IDIyLjg4MjRDMC40NTU5NjggMjIuMzQzNSAxLjA1NDk5IDIxLjcwNDUgMS41NTczNSAyMS44NzhDMS45NDg0IDIyLjYxOTggMi43MzExNSAyMy45NjA2IDMuMjYwOTkgMjQuNjM5NGMyLjM1Nzg1IDMuMDgzMjkgMy4wNjM5NiAyLjg3OTQ3IDIuNjAzOTYgMi4wNzI1OGwtMS44NzMwMy0zLjIyNjc4TDIuOTY2NzQgMjIuOTY2N0gyLjU1MDg5di0zLjU0NTEySDEuODI2MzN2LTUuMzMzMjVIMy44OTc2NlYxMS41MjVIMi42MDAzOFYxMC41NTI3SDIuOTY2NzRWNy4zNzE5OTNINy4xMjI2NVYxMC41NTI3SDExLjA4ODZWMTIuNTUxNkgxMC41MTk2TDEyLjY5MTUgOC4zMTQyN0gxMC43MzYxVjEwLjU1MjdINy43NzE2NVY0LjE2NTc5OEgxMi42ODI4VjcuMTkzODJINy4yOTMzNlY5LjAwMjczSDcuNzEwODQ0VjExLjUyNUg1LjU4NTM5VjcuNDI1MzZINy44MjUzNlY2LjY0MDMzSDE0LjgyNjdWOS4wMDI3M0g5LjcxOTY0VjExLjUyNUgxMS40MjQ4VjE0LjMyNTRIMTQuMDM0N1YyMS41NzI3SDE5LjgzOTNWMTQuMzI1NEgxNy4xMzkzVjEyLjU1MTZIMjAuNDc1NlYyMC4wNzUyVjE0LjMyNTRIMTcuOTQ0VjEyLjU1MTZIMjEuNzMzOVYxNC4zMjU0SDI0LjQ4MDNWMTIuNTUxNkgxNy40NzIyVjIwLjA4MjR2Ljk1MjYyMkwxNy45NDQgMjAuOTQxM0wyMC40NTA4IDIyLjAwMzFWMjEuNTA0N0wyMS40NDY2IDIwLjA4MjRWMjIuNDY0OUgyNC43OTQ0VjIwLjA4MjRIMjAuNzQwNFYxNi4xNTI4SDE3LjQxNDdWMTguODMyN0gyMC43NDA0VjIwLjA4MjR6IiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K" alt="Logo de WFS" class="header-logo">
                
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCAzOCAzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTI3LjA5MzggMTguODIzNkMyNy4wOTM4IDE4LjUyOTIgMjYuOTk3NSAxOC4xODUgMjYuODAxMyAxNy44NTQ1QzI2LjYwNTEgMTcuNTQ5MSAyNi4zMTA1IDE3LjMxODkgMjYuMDA4NCAxNy4wOTc3QzI1LjcwNjQgMTYuODc2NSAyNS4yNzc1IDE2LjcwODQgMjQuODI4OCAxNi41OTY4QzI0LjM4MDEgMTYuNDgzOCAyMy45MDM1IDE2LjQyMTYgMjMuNDIxMSAxNi40MjE2SDIuNTY2NDFWMTMuNzIyN0gyMi44OTU5QzI1LjQyNzYgMTMuNzIyNyAyNy40MTgyIDEzLjE0NTYgMjguODY1IDEyLjAwMzRDNDAuNzQzMSAzLjU0MjE0IDQyLjgwMTEgMC4xMjg1MjMgNDIuMjE5NCAwLjA0NTcxODhDNDIuMDk2IDAuMDQ1NzE4OCA0MC4yMjI3IDcuMjAzMjUgMzkuMDkzOCA5Ljg3MzYyTDM2LjE4MjMgMTYuOTgzNUgzOS4zNzQ1TDQyLjgyMjkgOC45NDE2NUM0My4xMzgzIDguMTY0NTcgNDIuNTQ0NSA2LjQxODE2IDQxLjE1MjUgNS4xMjczM0MzOC4zNzc5IDIuNTI4MTQgMzMuNjA4MiAxLjMxMjYyIDMzLjYwODIgMS4zMTI2MkMxNS4yNDY1IDMuMjUxNzYgNy44ODkwMSAxMC4zNTYyIDEyLjI0OTggMTguNDY3NkMxMC43NzE1IDIwLjcxMTUgOS42ODYwNyAyMi45NjYgOS42ODM0MSAyMi45NjZWMjMuNzExN0MxMC4yODM5IDIzLjQ1MSAxMS4wOTQ3IDIzLjEyOTEgMTIuMDQwMyAyMi42OTM2QzEzLjgwMzQgMjEuODYxNyAxNS41MDk1IDIxLjA0OTUgMTYuNzIyOCAyMC4zNTM1QzE5LjUxMTkgMTkuMjU3NyAyMS43NzY5IDE3LjM3NyAyMy4yODU2IDE0LjY1MjJDMjQuMzA5MSAxMi4xNjQxIDI0LjYyNTggOS4zODE5NyAyNC41NTUyIDYuNTQxNjdDMjQuNTQxOSA2LjI3ODkyIDI0LjQzOCA2LjA3MjU2IDI0LjI2NDQgNS44NjY5NkMyNC4xMjU4IDUuNzQ1NzkgMjMuODU1IDUuNjUzNTkgMjMuNTkzMSA1LjYyNDg5QzIzLjUyMjUgNS42MDI1NyAyMy4zODA1IDUuNTgwMzggMjMuMjk2NiA1LjU4MDU1TDIzLjEyMjkgNS43NjQ4N0MxNS41MTU5IDEwLjgzNjQgMTIuODIxMSAxNi4wMDMyIDguMDM3ODIgMjEuNzAyMUM3LjI5NDM5IDIyLjU0NSA2LjMxMjkyIDIzLjI1MjQgNS41Njk0OSAyMy42NDQ4QzUuMDc2OTIgMjQuMDEwMyA0LjY1NzI5IDI0LjE4OTIgNC41NDkxNiAyNC4xODkyQzQuMzM3NTYgMjQuMTg5MiA0LjUxMjgxIDI0LjY1MzggNS4zMTUyMSAyNS43MTZMMTYuNTkwNSAyOS45OTk5QzE3LjM5MjkgMzAuODU2MSAxNy4xNzEzIDMxLjIwMzcgMTYuNDY1NiAzMS4yMDM3TDEuNTU3NDUgMzAuMTkwNEMtMC4yMzUxNzUgMzAuMDI1MyAtNy4yNjQxOSAyMy43MTAzIDAgMjEuNjYzMUMzLjY4NDc1IDE3LjQ3ODUgOS40MzM1NiAxNC4xMzI1IDExLjcyNCAxMi4yOTExTDExLjA5NjUgMTEuMzI5MUMxMi43OTc5IDguMDY5NiAxNS4zMTI1IDUuMzk1NTMgMTguMjYxNiAzLjgzODEyQzIwLjM3NTYgMi43MTg5NiAyMi42MTQ2IDIuMTIzMjkgMjQuNzI5NyAyLjA3NzFDMjUuNTMyIDEuODI5MTYgMjMuNjA5MiAxLjI5Mzk5IDIxLjY3MjQgMi4xMjMyOUMyMS4zNjcxIDIuMjE1MTggMjEuMjEwNyAyLjMzMDU1IDIxLjAxMDUgMi40Nzg3QzIwLjY4MDEgMi43MjU5NiAyMC4zNjI2IDIuODM2NDkgMjAuMDkxNSAyLjkwNTE1QzE5LjU2MTEgMy4wOTQ5NyAxOS4xMDggMy4zNjM0IDE4Ljg4NyAzLjU2MzU1QzE3LjgzMSA0LjUzNjE5IDE3LjIwOCA1LjQ5ODIxIDE3LjAzNDQgNi4yMzI4NEMxNi45Njk4IDYuNTAwNjEgMTYuOTg3IDYuNjg4OSAxNy4wNjk4IDYuNzA1NTFDMTcuMTYxNCA2Ljc2NTkyIDE3LjM1NSA2LjczMzQxIDE3LjUxNzIgNi41NjA5MkMxNy42MTMxIDYuNDQ5MjkgMTcuODI3NCA2LjMwNjIzIDE4LjA3NzUgNi4xMDk4M0MxOC41MDQyIDUuNzU0NzYgMTkuMDIzNSA1LjMwNDkgMTkuNjExMiA0LjkyMzQ5QzE5LjkzNDMgNC43NjE5MiAyMC4yOTYxIDQuNjIyMiAyMC43MjI2IDQuNTMxOTJDMTcuMTYwNiA5Ljg3MzYyIDE3LjUzNjEgMjAuNzY3OSAyOS4wMzcyIDI3LjE0MTZDMzAuMTE1MyAyOC41MzM3IDMxLjE2MjkgMjkuNTQxMyAzMS4xNjI5IDI5LjU0MTNIMzEuNzYxMVYyOS4xOTM2QzMwLjM3NzYgMjcuNTU2NCAyOS4yMTI1IDI1Ljk5OTEgMjkuMTM0OCAyNS44NTYzQzI3LjkyODMgMjMuMzQ0NSAyNy4wOTM4IDE4LjkyIDI3LjA5MzggMTguODIzNlptMi42NDAyOC0xMi42MjA2Yy0yLjA3MzIyIDQuNDE2ODctNi41NzYyOCA2LjMzMzY5LTEwLjE4MzUgNy4xNzA5M0wxMi41NTA0IDEwLjkwNzdWNi43NjMxOUw1LjMzMzEzIDExLjU1ODRMMTAuMjg5NyA4LjczODk3TDE1LjI0NjUgNC4wNjEyMkwxNy45MzIyIDcuMjk4NjVMNDAuNjQ1IDguODEzNzZIMzYuNzEzOVYxMC40NzY4TDMzLjUwMDcgOS42MTkzNUwzMi43NzIyIDguNDQ1NkwyOS43NDQxIDExLjcwOTlMMjcuMzgwNSAxMS4wNTE2eiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==" alt="Logo de Airbus" class="header-logo">
            </div>
        </div>

        <div class="content">
            <div id="listView">
                <div id="newFlightForm" class="hidden">
                    <div class="card">
                        <form id="flightForm">
                            <div class="form-group">
                                <label class="form-label">Número de Vuelo</label>
                                <input type="text" id="flightNumber" class="form-input" placeholder="Ej: 1847" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Número de Registro</label>
                                <input type="text" id="registrationNumber" class="form-input" placeholder="Ej: F-GHRB">
                            </div>
                            <div style="display: flex; gap: 12px;">
                                <div class="form-group" style="flex: 1;">
                                    <label class="form-label">Vuelo Llegada</label>
                                    <input type="text" id="arrivalFlight" class="form-input" placeholder="Ej: F-GHRB">
                                </div>
                                <div class="form-group" style="flex: 1;">
                                    <label class="form-label">Vuelo Salida</label>
                                    <input type="text" id="departureFlight" class="form-input" placeholder="Ej: F-GHRB">
                                </div>
                            </div>
                            <div style="display: flex; gap: 12px;">
                                <div class="form-group" style="flex: 1;">
                                    <label class="form-label">Aeropuerto Llegada</label>
                                    <select id="arrivalAirport" class="form-select"></select>
                                </div>
                                <div class="form-group" style="flex: 1;">
                                    <label class="form-label">Aeropuerto Salida</label>
                                    <select id="departureAirport" class="form-select"></select>
                                </div>
                            </div>
                            <div style="display: flex; gap: 12px;">
                                <div class="form-group" style="flex: 1;">
                                    <label class="form-label">STA</label>
                                    <input type="time" id="sta" class="form-input">
                                </div>
                                <div class="form-group" style="flex: 1;">
                                    <label class="form-label">STD</label>
                                    <input type="time" id="std" class="form-input">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Coordinador</label>
                                <select id="coordinator" class="form-select"></select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Conductor</label>
                                <select id="driver" class="form-select"></select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Wingwalker 1</label>
                                <select id="wingwalker1" class="form-select"></select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Wingwalker 2</label>
                                <select id="wingwalker2" class="form-select"></select>
                            </div>

                            <div style="display: flex; gap: 12px;">
                                <button type="submit" class="btn btn-primary" style="flex: 1;">Crear Vuelo</button>
                                <button type="button" id="cancelNewFlight" class="btn" style="background: #e5e7eb; color: #374151;">Cancelar</button>
                            </div>
                        </form>
                    </div>
                </div>

                <button id="newFlightBtn" class="btn btn-primary">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Nuevo Vuelo
                </button>

                <button id="continueFlightBtn" class="btn btn-warning hidden">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12,6 12,12 16,14"></polyline>
                    </svg>
                    Continuar Vuelo
                </button>

                <button id="historyBtn" class="btn btn-success">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="m3 12 2-2m0 0 7-7 7 7M5 10v10a1 1 0 0 0 1 1h3m10-11 2 2m-2-2v10a1 1 0 0 0 1 1h3m-6 0a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h2z"/>
                    </svg>
                    Ver Historial (<span id="historyCount">0</span>)
                </button>
            </div>

            <div id="currentFlightView" class="hidden">
                <div id="flightInfo" class="flight-info">
                    <h2 id="currentFlightTitle">Vuelo</h2>
                    <p id="currentFlightReg">Registro:</p>
                    <p id="currentFlightArr">Vuelo Llegada:</p>
                    <p id="currentFlightDep">Vuelo Salida:</p>
                    <p id="currentFlightArrAp">Aeropuerto Llegada:</p>
                    <p id="currentFlightDepAp">Aeropuerto Salida:</p>
                    <p id="currentFlightSTA">STA:</p>
                    <p id="currentFlightSTD">STD:</p>
                    <p id="currentFlightCoordinator">Coordinador:</p>
                    <p id="currentFlightDriver">Conductor:</p>
                    <p id="currentFlightWW1">Wingwalker 1:</p>
                    <p id="currentFlightWW2">Wingwalker 2:</p>
                    <p id="currentFlightDate">Fecha:</p>
                    <p id="currentFlightTime">Inicio:</p>
                </div>

                <div id="operationsList"></div>
            </div>

            <div id="historyView" class="hidden">
                <div id="historyList"></div>
                <div id="emptyHistory" class="hidden" style="text-align: center; color: #6b7280; padding: 40px 0;">
                    No hay vuelos completados aún
                </div>
            </div>
        </div>

        <div id="bottomNav" class="bottom-nav hidden">
            <button id="backBtn" class="btn btn-primary" style="flex: 1;">← Volver</button>
            <button id="saveBtn" class="btn btn-success hidden" style="flex: 1;">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path d="m9 12 2 2 4-4"></path>
                    <path d="M21 12c.552 0 1-.448 1-1V8a2 2 0 0 0-2-2h-5L9 2H4a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2z"></path>
                </svg>
                Guardar
            </button>
        </div>
    </div>

    <script>
        // PWA Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('data:text/javascript,')
            .catch(() => {});
        }

        // Variables globales
        let flights = [];
        let currentFlight = null;
        let currentView = 'list';

        const coordinatorOptions = ["", "Sergio Iacobone", "Francisco Cartas", "Fernando Perez", "Paco Muñoz"];
        const driverOptions = ["", "Fidel Botey", "Juan Gamez", "Paco Jerez", "Gaspar Franco"];
        const wingwalkerOptions = ["", ...coordinatorOptions.slice(1), ...driverOptions.slice(1)];
        const airportOptions = ["", "Chester CEG", "Toulouse TLS", "Hamburgo XFW", "Bremen BRE", "Saint-Nazaire SNR"];

        const operations = [
            'OPERATIVA', 'PAYLOAD', 'LLEGADA', 'SALIDA', 'ATA', 'PARADA MOTORES',
            'START TOWING', 'END TOWING', 'GPU ON', 'GPU OFF', 'FRONT JACK UP',
            'REAR JACK UP', 'FUEL', 'ACU ON', 'ACU OFF', 'REAR JACK DOWN',
            'FRONT JACK DOWN', 'START TOWING', 'END TOWING', 'STARTUP', 'TAXI', 'TAKEOFF'
        ];

        // Cargar datos
        function loadData() {
            const saved = localStorage.getItem('ghrBelugaFlights');
            if (saved) {
                flights = JSON.parse(saved);
            }
            updateHistoryCount();
        }

        // Guardar datos
        function saveData() {
            localStorage.setItem('ghrBelugaFlights', JSON.stringify(flights));
            updateHistoryCount();
        }

        // Actualizar contador de historial
        function updateHistoryCount() {
            document.getElementById('historyCount').textContent = flights.filter(f => f.completed).length;
        }

        // Cambiar vista
        function showView(view) {
            document.querySelectorAll('#listView, #currentFlightView, #historyView').forEach(v => {
                v.classList.add('hidden');
            });

            if (view === 'list') {
                document.getElementById('listView').classList.remove('hidden');
                document.getElementById('bottomNav').classList.add('hidden');
                updateContinueButton();
            } else if (view === 'current') {
                document.getElementById('currentFlightView').classList.remove('hidden');
                document.getElementById('bottomNav').classList.remove('hidden');
                document.getElementById('saveBtn').classList.remove('hidden');
                updateCurrentFlightView();
            } else if (view === 'history') {
                document.getElementById('historyView').classList.remove('hidden');
                document.getElementById('bottomNav').classList.remove('hidden');
                document.getElementById('saveBtn').classList.add('hidden');
                updateHistoryView();
            }

            currentView = view;
        }

        // Actualizar botón continuar
        function updateContinueButton() {
            const btn = document.getElementById('continueFlightBtn');
            if (currentFlight && !currentFlight.completed) {
                btn.classList.remove('hidden');
                btn.innerHTML = `
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12,6 12,12 16,14"></polyline>
                    </svg>
                    Continuar Vuelo ${currentFlight.flightNumber}
                `;
            } else {
                btn.classList.add('hidden');
            }
        }

        // Crear nuevo vuelo
        function createFlight(data) {
            currentFlight = {
                id: Date.now(),
                ...data,
                date: new Date().toLocaleDateString('es-ES'),
                startTime: new Date().toLocaleTimeString('es-ES'),
                operations: {},
                completed: false
            };
            showView('current');
        }

        // Registrar operación
        function recordOperation(operation) {
            if (!currentFlight) return;

            const currentTime = new Date().toLocaleTimeString('es-ES');
            currentFlight.operations[operation] = currentTime;
            updateCurrentFlightView();
        }

        // Registrar payload
        function recordPayload(value) {
            if (!currentFlight || !value.trim()) return;

            currentFlight.operations['PAYLOAD'] = value.trim();
            updateCurrentFlightView();
        }

        // Ajustar tiempo
        function adjustTime(operation, minutes) {
            if (!currentFlight?.operations[operation]) return;

            const currentTime = currentFlight.operations[operation];
            const [hours, mins, secs] = currentTime.split(':').map(Number);

            let totalMinutes = hours * 60 + mins + minutes;
            if (totalMinutes < 0) totalMinutes = 0;
            if (totalMinutes >= 24 * 60) totalMinutes = 24 * 60 - 1;

            const newHours = Math.floor(totalMinutes / 60);
            const newMins = totalMinutes % 60;
            const newTime = `${newHours.toString().padStart(2, '0')}:${newMins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;

            currentFlight.operations[operation] = newTime;
            updateCurrentFlightView();
        }

        // Actualizar vista de vuelo actual
        function updateCurrentFlightView() {
            if (!currentFlight) return;

            document.getElementById('currentFlightTitle').textContent = `Vuelo ${currentFlight.flightNumber}`;
            document.getElementById('currentFlightReg').textContent = `Registro: ${currentFlight.registrationNumber || 'N/A'}`;
            document.getElementById('currentFlightArr').textContent = `Vuelo Llegada: ${currentFlight.arrivalFlight || 'N/A'}`;
            document.getElementById('currentFlightDep').textContent = `Vuelo Salida: ${currentFlight.departureFlight || 'N/A'}`;
            document.getElementById('currentFlightArrAp').textContent = `Aeropuerto Llegada: ${currentFlight.arrivalAirport || 'N/A'}`;
            document.getElementById('currentFlightDepAp').textContent = `Aeropuerto Salida: ${currentFlight.departureAirport || 'N/A'}`;
            document.getElementById('currentFlightSTA').textContent = `STA: ${currentFlight.sta || 'N/A'}`;
            document.getElementById('currentFlightSTD').textContent = `STD: ${currentFlight.std || 'N/A'}`;
            document.getElementById('currentFlightCoordinator').textContent = `Coordinador: ${currentFlight.coordinator || 'N/A'}`;
            document.getElementById('currentFlightDriver').textContent = `Conductor: ${currentFlight.driver || 'N/A'}`;
            document.getElementById('currentFlightWW1').textContent = `Wingwalker 1: ${currentFlight.wingwalker1 || 'N/A'}`;
            document.getElementById('currentFlightWW2').textContent = `Wingwalker 2: ${currentFlight.wingwalker2 || 'N/A'}`;
            document.getElementById('currentFlightDate').textContent = `Fecha: ${currentFlight.date}`;
            document.getElementById('currentFlightTime').textContent = `Inicio: ${currentFlight.startTime}`;

            const operationsList = document.getElementById('operationsList');
            operationsList.innerHTML = '';

            operations.forEach(operation => {
                const div = document.createElement('div');
                div.className = 'operation-item';

                const hasValue = currentFlight.operations[operation];

                div.innerHTML = `
                    <div class="operation-header">
                        <div class="operation-title">${operation}</div>
                        ${hasValue ? `<div class="operation-time">${hasValue}</div>` : ''}
                    </div>
                    <div class="operation-controls">
                        ${operation === 'PAYLOAD' ? `
                            <input type="text" id="payload-${operation}" class="payload-input" placeholder="Ej: 12.5 ton">
                            <button onclick="recordPayload(document.getElementById('payload-${operation}').value); document.getElementById('payload-${operation}').value = '';" class="btn btn-sm btn-primary">Guardar</button>
                        ` : `
                            <button onclick="recordOperation('${operation}')" class="btn btn-sm ${hasValue ? 'btn-success' : 'btn-primary'}">
                                ${hasValue ? 'Actualizar' : 'Registrar'}
                            </button>
                            ${hasValue ? `
                                <button onclick="adjustTime('${operation}', -1)" class="btn-icon minus" title="Restar 1 minuto">-</button>
                                <button onclick="adjustTime('${operation}', 1)" class="btn-icon plus" title="Sumar 1 minuto">+</button>
                            ` : ''}
                        `}
                    </div>
                `;

                operationsList.appendChild(div);
            });
        }

        // Guardar vuelo
        function saveFlight() {
            if (!currentFlight) return;

            currentFlight.completed = true;
            currentFlight.endTime = new Date().toLocaleTimeString('es-ES');

            const existingIndex = flights.findIndex(f => f.id === currentFlight.id);
            if (existingIndex >= 0) {
                flights[existingIndex] = currentFlight;
            } else {
                flights.push(currentFlight);
            }

            saveData();
            currentFlight = null;
            showView('list');
        }

        // Actualizar vista de historial
        function updateHistoryView() {
            const historyList = document.getElementById('historyList');
            const emptyHistory = document.getElementById('emptyHistory');

            const completedFlights = flights.filter(f => f.completed);

            if (completedFlights.length === 0) {
                historyList.innerHTML = '';
                emptyHistory.classList.remove('hidden');
                return;
            }

            emptyHistory.classList.add('hidden');
            historyList.innerHTML = '';

            completedFlights.reverse().forEach(flight => {
                const div = document.createElement('div');
                div.className = 'history-item';

                const operationsHtml = Object.entries(flight.operations)
                    .map(([op, time]) => `
                        <div class="history-operation">
                            <span>${op}</span>
                            <span style="color: #059669; font-family: monospace;">${time}</span>
                        </div>
                    `).join('');

                div.innerHTML = `
                    <div class="history-header">
                        <div>
                            <h3 style="font-size: 18px; font-weight: bold; margin-bottom: 4px;">Vuelo ${flight.flightNumber}</h3>
                            <p style="color: #6b7280; font-size: 14px;">Registro: ${flight.registrationNumber || 'N/A'}</p>
                            <p style="color: #6b7280; font-size: 14px;">Coordinador: ${flight.coordinator || 'N/A'}</p>
                            <p style="color: #6b7280; font-size: 14px;">Fecha: ${flight.date}</p>
                        </div>
                        <button onclick="deleteFlight(${flight.id})" class="btn-icon" style="background: #fee2e2; color: #dc2626;" title="Eliminar vuelo">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <polyline points="3,6 5,6 21,6"></polyline>
                                <path d="M19,6v14a2,2,0,0,1-2,2H7a2,2,0,0,1-2-2V6m3,0V4a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2V6"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="history-operations">
                        ${operationsHtml}
                    </div>
                    <div style="margin-top: 12px; font-size: 14px; color: #6b7280;">
                        ${Object.keys(flight.operations).length} operaciones registradas
                    </div>
                `;

                historyList.appendChild(div);
            });
        }

        // Eliminar vuelo
        function deleteFlight(flightId) {
            if (confirm('¿Estás seguro de que quieres eliminar este vuelo?')) {
                flights = flights.filter(f => f.id !== flightId);
                saveData();
                updateHistoryView();
            }
        }

        // Generar opciones para los selects de la tripulación
        function generateCrewOptions() {
            const coordinatorSelect = document.getElementById('coordinator');
            const driverSelect = document.getElementById('driver');
            const ww1Select = document.getElementById('wingwalker1');
            const ww2Select = document.getElementById('wingwalker2');

            // Populate Coordinator dropdown
            coordinatorSelect.innerHTML = '';
            coordinatorOptions.forEach(member => {
                const option = document.createElement('option');
                option.value = member;
                option.textContent = member || "Seleccionar...";
                coordinatorSelect.appendChild(option);
            });

            // Populate Driver dropdown
            driverSelect.innerHTML = '';
            driverOptions.forEach(member => {
                const option = document.createElement('option');
                option.value = member;
                option.textContent = member || "Seleccionar...";
                driverSelect.appendChild(option);
            });

            // Populate Wingwalker dropdowns with the combined list
            [ww1Select, ww2Select].forEach(select => {
                select.innerHTML = '';
                wingwalkerOptions.forEach(member => {
                    const option = document.createElement('option');
                    option.value = member;
                    option.textContent = member || "Seleccionar...";
                    select.appendChild(option);
                });
            });
        }

        // Generar opciones para los selects de aeropuertos
        function generateAirportOptions() {
            const arrivalAirportSelect = document.getElementById('arrivalAirport');
            const departureAirportSelect = document.getElementById('departureAirport');

            [arrivalAirportSelect, departureAirportSelect].forEach(select => {
                select.innerHTML = '';
                airportOptions.forEach(airport => {
                    const option = document.createElement('option');
                    option.value = airport;
                    option.textContent = airport || "Seleccionar...";
                    select.appendChild(option);
                });
            });
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            generateCrewOptions();
            generateAirportOptions();

            // Nuevo vuelo
            document.getElementById('newFlightBtn').addEventListener('click', () => {
                document.getElementById('newFlightBtn').classList.add('hidden');
                document.getElementById('continueFlightBtn').classList.add('hidden');
                document.getElementById('historyBtn').classList.add('hidden');
                document.getElementById('newFlightForm').classList.remove('hidden');
                document.getElementById('flightNumber').focus();
            });
            
            // Cancelar nuevo vuelo
            document.getElementById('cancelNewFlight').addEventListener('click', () => {
                document.getElementById('newFlightBtn').classList.remove('hidden');
                document.getElementById('continueFlightBtn').classList.remove('hidden');
                document.getElementById('historyBtn').classList.remove('hidden');
                document.getElementById('newFlightForm').classList.add('hidden');
                document.getElementById('flightForm').reset();
            });

            // Form de nuevo vuelo
            document.getElementById('flightForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const flightData = {
                    flightNumber: document.getElementById('flightNumber').value.trim(),
                    registrationNumber: document.getElementById('registrationNumber').value.trim(),
                    arrivalFlight: document.getElementById('arrivalFlight').value.trim(),
                    departureFlight: document.getElementById('departureFlight').value.trim(),
                    arrivalAirport: document.getElementById('arrivalAirport').value.trim() || 'N/A',
                    departureAirport: document.getElementById('departureAirport').value.trim() || 'N/A',
                    sta: document.getElementById('sta').value.trim(),
                    std: document.getElementById('std').value.trim(),
                    coordinator: document.getElementById('coordinator').value.trim() || 'N/A',
                    driver: document.getElementById('driver').value.trim() || 'N/A',
                    wingwalker1: document.getElementById('wingwalker1').value.trim() || 'N/A',
                    wingwalker2: document.getElementById('wingwalker2').value.trim() || 'N/A'
                };
                if (flightData.flightNumber) {
                    createFlight(flightData);
                }
            });

            // Continuar vuelo
            document.getElementById('continueFlightBtn').addEventListener('click', () => {
                showView('current');
            });

            // Ver historial
            document.getElementById('historyBtn').addEventListener('click', () => {
                showView('history');
            });

            // Volver
            document.getElementById('backBtn').addEventListener('click', () => {
                showView('list');
            });

            // Guardar
            document.getElementById('saveBtn').addEventListener('click', saveFlight);
        });

        // Manifest dinámico
        const manifest = {
            "name": "GHR BELUGA",
            "short_name": "GHR BELUGA",
            "description": "Aplicación para operaciones de vuelo",
            "start_url": "./",
            "display": "standalone",
            "background_color": "#2563eb",
            "theme_color": "#2563eb",
            "orientation": "portrait",
            "icons": [
                {
                    "src": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiBmaWxsPSIjMjU2M2ViIiByeD0iMjQiLz4KPHN2ZyB4PSI0OCIgeT0iNDgiIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CjxwYXRoIGQ9Im0xNy41IDE5LjUtLjUtMi41LS41LTIuNS01LTIuNS01LTIuNS0uNSAyLjUtLjUgMi41WiIvPgo8cGF0aCBkPSJtOSA1IDggOC0zLjUtMUw5IDVaIi8+Cjwvc3ZnPgo8L3N2Zz4=",
                    "sizes": "192x192",
                    "type": "image/svg+xml"
                },
                {
                    "src": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSIjMjU2M2ViIiByeD0iNjQiLz4KPHN2ZyB4PSIxMjgiIHk9IjEyOCIgd2lkdGg9IjI1NiIgaGVpZ2h0PSIyNTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPgo8cGF0aCBkPSJtMTcuNSAxOS41LS41LTIuNS0uNS0yLjUtNS0yLjUtNS0yLjUtLjUgMi41LS41IDIuNVoiLz4KPHBhdGggZD0ibTkgNSA4IDgtMy41LTFMOSA1WiIvPgo8L3N2Zz4KPC9zdmc+",
                    "sizes": "512x512",
                    "type": "image/svg+xml"
                }
            ]
        };

        const manifestBlob = new Blob([JSON.stringify(manifest)], {type: 'application/json'});
        const manifestURL = URL.createObjectURL(manifestBlob);
        document.getElementById('manifest-placeholder').href = manifestURL;
    </script>
</body>
</html>
```
